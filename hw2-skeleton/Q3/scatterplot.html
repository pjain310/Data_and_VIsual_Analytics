<!DOCTYPE html>
<meta charset="utf-8">
<style type=text/css>
  @media print
  {
  svg {page-break-after:always}
  }
      .axis path,
  .axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
  }
  .axis text {
    font-family: sans-serif;
    font-size: 11px;
  }

.pagebreak { page-break-before: always; }

  .legend rect {
  fill:white;
  stroke:black;
  opacity:0.8;}

  .grid line {
    stroke: lightgrey;
    opacity: 0.7;
}
.grid path {
      stroke-width: 0;
}

</style>
<script src="../lib/d3.v5.min.js"></script>
<head>
    <meta charset="utf-8">
    <title>pjain310</title>
</head>
<body>
  <script type="text/javascript" src="../lib/d3.v5.min.js"></script>
  <script>

    d3.csv('movies.csv')
    .then(function(dataset) {
      dataset.forEach(function(d) {
      d.Rating = +d.Rating;
      d.WinsNoms = +d.WinsNoms;
      d.IsGoodRating = +d.IsGoodRating;
      d.Budget = +d.Budget;
      d.Votes = +d.Votes;
    });

    console.log(dataset[0])

    //Specify Padding, Height and Widhh for SVG elements
    var w=800;
    var h=500;
    var padding=40;
    var max_wins=d3.max(dataset,function(d){
      return d.WinsNoms;}
    );


    //Create all scaling functions
      var xScale = d3.scaleLinear()
      .domain([0,d3.max(dataset,function(d){
        return d.Rating;}
      )])
      .range([padding, w-padding]);

      var yScale2 = d3.scaleLinear()
      .domain([0,d3.max(dataset,function(d){
        return d.Budget;}
      )])
      .range([h - padding, padding]);

      var yScale3 = d3.scaleLinear()
      .domain([0,d3.max(dataset,function(d){
        return d.Votes;}
      )])
      .range([h - padding, padding]);

      var yScale = d3.scaleLinear()
      .domain([0, d3.max(dataset,function(d){
        return d.WinsNoms;}
      )])
      .range([h-padding, padding]);

      var yScaleLog = d3.scaleLog()
      .clamp(true)
      .domain([0.1, d3.max(dataset,function(d){
        return d.WinsNoms;}
      )])
      .range([h-padding, padding])
      .nice();

      var yScaleSqrt = d3.scaleSqrt()
      .domain([0, d3.max(dataset,function(d){
        return d.WinsNoms;}
      )])
      .range([h-padding, padding]);

      var colourScale = d3.scaleOrdinal()
      .domain([0,1])
      .range(["red","blue"]);

      var shapeScale = d3.scaleOrdinal()
      .domain([0,1])
      .range([d3.symbolCircle, d3.symbolCross]);

      var sizeScale = d3.scaleLinear()
      .domain([0, max_wins])
      .range([10,300]);

      //Create svg and symbol elements
      var svg = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);

      var svg2 = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);

      var svg3 = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);

      var svg4 = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);

      var svg5 = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);

      var symbol = d3.symbol()
                    .size(20);

      var symbol3 = d3.symbol()
      .type(function(d){ return shapeScale(d.IsGoodRating)});


      //Add axes for  SVG - 1
      svg.append("g")
      .attr("class", "x axis")
      .attr("ticks",20)
      .attr("transform", "translate(0," + (h - padding) + ")")
      .call(d3.axisBottom(xScale));

      svg.append("g")
      .attr("class", "y axis")
      .attr("ticks",12)
      .attr("transform", "translate(" + padding*2 + ",0)")
      .call(d3.axisLeft(yScale));

      //Add axis titles
      svg.append("text")
      .attr("x", (padding/2))
      .attr("y", h/2 + (padding/2))
      .attr("text-anchor", "middle")
      .attr("transform","rotate(-90 30 260)")
      .style("font-size", "14px")
      .text("Wins + Nominations");

      svg.append("text")
      .attr("x", w/2 + (padding/2))
      .attr("y", h - (padding/2.5))
      .attr("text-anchor", "middle")
      .style("font-size", "14px")
      .text("Ratings");

      //Add gridlines for SVG - 2
      var gridlinesa = d3.axisLeft()
                    .tickFormat("")
                    .tickSize(-w)
                    .scale(yScale);

      var gridlinesb = d3.axisBottom()
                    .tickFormat("")
                    .tickSize(-w)
                    .scale(xScale);

      svg.append("g")
     .attr("class", "grid")
     .attr("transform", "translate(" + padding*2 + ",0)")
     .call(gridlinesa);

     svg.append("g")
    .attr("class", "grid")
    .attr("transform", "translate("+padding+ "," + (h - padding) + ")")
    .call(gridlinesb);

      //Add values for SVG - 1
      svg.selectAll(".symbol")
      .data(dataset)
      .enter().append("path")
      .attr("class", "symbol")
      .attr("d", function(d, i) { return symbol.type(shapeScale(d.IsGoodRating))(); })
      .style("stroke", function(d) { return colourScale(d.IsGoodRating); })
      .attr("transform", function(d) {
      return "translate(" + xScale(d.Rating) + "," + yScale(d.WinsNoms) +")";
    })
      .attr("fill","none");

      // Add header for SVG - 1
      svg.append("text")
        .attr("x", (w / 2))
        .attr("y", 0 + (padding/ 2))
        .attr("text-anchor", "middle")
        .style("font-size", "18px")
        .style("text-decoration", "underline")
        .text("Wins/Nominations vs Ratings Graph");

      // Add legend for SVG - 1
      var legend = svg.selectAll(".legend")
                .data(colourScale.domain())
                .enter().append("g")
                .attr("class", "legend");

      svg.append("rect")
      .attr("x",110)
      .attr("y",70)
      .attr("width",130)
      .attr("height",80)
      .attr("stroke","black")
      .attr("fill","none");

      var classes=[0,1];

      legend.selectAll(".symbol")
      .data(classes)
      .enter().append("path")
      .attr("d", function(d) { return symbol.type(shapeScale(d))(); })
      .style("stroke", function(d) { return colourScale(d); })
      .attr("transform", function(d,i) {
      return "translate(" + 220 + "," + ((i * 30)+ 96) +")";
    })
      .attr("fill","none");

      legend.append("text")
      .attr("x", 200)
      .attr("y", 100)
      .attr("transform", function(d, i){return "translate(0," + i * 30 + ")";})
      .attr("font-size", "15px")
      .style("text-anchor", "end")
      .text(function(d) {
          if(d=="1")
              return "Good Rating";
          else return "Bad Rating";
      });

      //Add gridlines for SVG - 2
      //Add gridlines
      var gridlines2a = d3.axisLeft()
                    .tickFormat("")
                    .tickSize(-w)
                    .scale(yScale2);

      svg2.append("g")
     .attr("class", "grid")
     .attr("transform", "translate(" + padding*2 + ",0)")
     .call(gridlines2a);

     svg2.append("g")
    .attr("class", "grid")
    .attr("transform", "translate("+padding+ "," + (h - padding) + ")")
    .call(gridlinesb);

      // Add values for SVG - 2
      svg2.selectAll(".symbol")
        .data(dataset)
        .enter().append("path")
        .attr("class", "symbol")
        .attr("d", function(d, i) { return symbol.type(shapeScale(d.IsGoodRating))(); })
        .style("stroke", function(d) { return colourScale(d.IsGoodRating); })
        .attr("transform", function(d) {
        return "translate(" + xScale(d.Rating) + "," + yScale2(d.Budget) +")";
      })
        .attr("fill","none");

      // Add axes for SVG - 2
      svg2.append("g")
      .attr("class", "x axis")
      .attr("ticks",20)
      .attr("transform", "translate(0," + (h - padding) + ")")
      .call(d3.axisBottom(xScale));

      svg2.append("g")
      .attr("class", "y axis")
      .attr("ticks",12)
      .attr("transform", "translate(" + padding*2 + ",0)")
      .call(d3.axisLeft(yScale2))
      .selectAll("text")
            .style("text-anchor", "start")
            .attr("dx", "-5.5em")
            .attr("dy", ".1em")
            .attr("transform", "rotate(-45)" );

      //Add axis titles
      svg2.append("text")
      .attr("x", (padding/2))
      .attr("y", h/2 + (padding/2))
      .attr("text-anchor", "middle")
      .attr("transform","rotate(-90 10 260)")
      .style("font-size", "14px")
      .text("Budget");

      svg2.append("text")
      .attr("x", w/2 + (padding/2))
      .attr("y", h - (padding/2.5))
      .attr("text-anchor", "middle")
      .style("font-size", "14px")
      .text("Ratings");


      // Add header for SVG - 2
      svg2.append("text")
        .attr("x", (w / 2))
        .attr("y", 0 + (padding/2))
        .attr("text-anchor", "middle")
        .style("font-size", "18px")
        .style("text-decoration", "underline")
        .text("Budget vs Ratings Graph");

      //Add legend for SVG - 2
      var legend = svg2.selectAll(".legend")
                .data(colourScale.domain())
                .enter().append("g")
                .attr("class", "legend");

      svg2.append("rect")
      .attr("x",110)
      .attr("y",70)
      .attr("width",130)
      .attr("height",80)
      .attr("stroke","black")
      .attr("fill","none");

      var classes=[0,1];

      legend.selectAll(".symbol")
      .data(classes)
      .enter().append("path")
      .attr("d", function(d) { return symbol.type(shapeScale(d))(); })
      .style("stroke", function(d) { return colourScale(d); })
      .attr("transform", function(d,i) {
      return "translate(" + 220 + "," + ((i * 30)+ 96) +")";
    })
      .attr("fill","none");

      legend.append("text")
      .attr("x", 200)
      .attr("y", 100)
      .attr("transform", function(d, i){return "translate(0," + i * 30 + ")";})
      .attr("font-size", "15px")
      .style("text-anchor", "end")
      .text(function(d) {
          if(d=="1")
              return "Good Rating";
          else return "Bad Rating";
      });

      // Page break


      // SVG 3 //

      // Add gridlines - SVG 3

      svg3.append("g")
      .attr("class", "grid")
      .attr("transform", "translate(" + padding*2 + ",0)")
      .call(gridlines2a);

      svg3.append("g")
      .attr("class", "grid")
      .attr("transform", "translate("+padding+ "," + (h - padding) + ")")
      .call(gridlinesb);

      //Add axes for  SVG - 3
      svg3.append("g")
      .attr("class", "x axis")
      .attr("ticks",20)
      .attr("transform", "translate(0," + (h - padding) + ")")
      .call(d3.axisBottom(xScale));

      svg3.append("g")
      .attr("class", "y axis")
      .attr("ticks",12)
      .attr("transform", "translate(" + padding*2 + ",0)")
      .call(d3.axisLeft(yScale3));

      //Add axis titles
      svg3.append("text")
      .attr("x", (padding/2))
      .attr("y", h/2 + (padding/2))
      .attr("text-anchor", "middle")
      .attr("transform","rotate(-90 30 260)")
      .style("font-size", "14px")
      .text("Votes");

      svg3.append("text")
      .attr("x", w/2 + (padding/2))
      .attr("y", h - (padding/2.5))
      .attr("text-anchor", "middle")
      .style("font-size", "14px")
      .text("Ratings");

        // Add points - SVG 3
        svg3.selectAll(".symbol")
          .data(dataset)
          .enter().append("path")
          .attr("class", "symbol")
          .attr("d", function(d, i) { return symbol3.type(shapeScale(d.IsGoodRating)).size(sizeScale(d.WinsNoms))(); })
          .style("stroke", function(d) { return colourScale(d.IsGoodRating); })
          .attr("transform", function(d) {
          return "translate(" + xScale(d.Rating) + "," + yScale3(d.Votes) +")";
        })
          .attr("fill","none");

          // Add header for SVG - 3
          svg3.append("text")
            .attr("x", (w / 2))
            .attr("y", 0 + (padding/ 2))
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .style("text-decoration", "underline")
            .text("Votes vs Ratings Graph");

        //Add legend
        var legend = svg3.selectAll(".legend")
                  .data(colourScale.domain())
                  .enter().append("g")
                  .attr("class", "legend");

        svg3.append("rect")
        .attr("x",110)
        .attr("y",70)
        .attr("width",130)
        .attr("height",80)
        .attr("stroke","black")
        .attr("fill","none");

        var classes=[0,1];

        legend.selectAll(".symbol")
        .data(classes)
        .enter().append("path")
        .attr("d", function(d) { return symbol.type(shapeScale(d))(); })
        .style("stroke", function(d) { return colourScale(d); })
        .attr("transform", function(d,i) {
        return "translate(" + 220 + "," + ((i * 30)+ 96) +")";
      })
        .attr("fill","none");

        legend.append("text")
        .attr("x", 200)
        .attr("y", 100)
        .attr("transform", function(d, i){return "translate(0," + i * 30 + ")";})
        .attr("font-size", "15px")
        .style("text-anchor", "end")
        .text(function(d) {
            if(d=="1")
                return "Good Rating";
            else return "Bad Rating";
        });

          //Add axes for  SVG - 4
          svg4.append("g")
          .attr("class", "x axis")
          .attr("ticks",20)
          .attr("transform", "translate(0," + (h - padding) + ")")
          .call(d3.axisBottom(xScale));

          svg4.append("g")
          .attr("class", "y axis")
          .attr("ticks",12)
          .attr("transform", "translate(" + padding*2 + ",0)")
          .call(d3.axisLeft(yScaleSqrt));

          //Add axis titles
          svg4.append("text")
          .attr("x", (padding/2))
          .attr("y", h/2 + (padding/2))
          .attr("text-anchor", "middle")
          .attr("transform","rotate(-90 30 260)")
          .style("font-size", "14px")
          .text("Budget");

          svg4.append("text")
          .attr("x", w/2 + (padding/2))
          .attr("y", h - (padding/2.5))
          .attr("text-anchor", "middle")
          .style("font-size", "14px")
          .text("Ratings");

          //Add gridlines for SVG - 4
          var gridlinessqrt = d3.axisLeft()
                        .tickFormat("")
                        .tickSize(-w)
                        .scale(yScaleSqrt);

          svg4.append("g")
         .attr("class", "grid")
         .attr("transform", "translate(" + padding*2 + ",0)")
         .call(gridlinessqrt);

         svg4.append("g")
        .attr("class", "grid")
        .attr("transform", "translate("+padding+ "," + (h - padding) + ")")
        .call(gridlinesb);

          //Add values for SVG - 4
          svg4.selectAll(".symbol")
          .data(dataset)
          .enter().append("path")
          .attr("class", "symbol")
          .attr("d", function(d, i) { console.log("Symbol"+d.IsGoodRating); return symbol.type(shapeScale(d.IsGoodRating))(); })
          .style("stroke", function(d) { console.log("Shape"+d.IsGoodRating); return colourScale(d.IsGoodRating); })
          .attr("transform", function(d) {
          return "translate(" + xScale(d.Rating) + "," + yScaleSqrt(d.WinsNoms) +")";
        })
          .attr("fill","none");

          // Add header for SVG - 4
          svg4.append("text")
            .attr("x", (w / 2))
            .attr("y", 0 + (padding/ 2))
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .style("text-decoration", "underline")
            .text("Wins/Nominations vs Ratings Graph - Square Root Scale");

          // Add legend for SVG - 4
          var legend = svg4.selectAll(".legend")
                    .data(colourScale.domain())
                    .enter().append("g")
                    .attr("class", "legend");

          svg4.append("rect")
          .attr("x",110)
          .attr("y",70)
          .attr("width",130)
          .attr("height",80)
          .attr("stroke","black")
          .attr("fill","none");

          var classes=[0,1];

          legend.selectAll(".symbol")
          .data(classes)
          .enter().append("path")
          .attr("d", function(d) { return symbol.type(shapeScale(d))(); })
          .style("stroke", function(d) { return colourScale(d); })
          .attr("transform", function(d,i) {
          return "translate(" + 220 + "," + ((i * 30)+ 96) +")";
        })
          .attr("fill","none");

          legend.append("text")
          .attr("x", 200)
          .attr("y", 100)
          .attr("transform", function(d, i){return "translate(0," + i * 30 + ")";})
          .attr("font-size", "15px")
          .style("text-anchor", "end")
          .text(function(d) {
              if(d=="1")
                  return "Good Rating";
              else return "Bad Rating";
          });


          //Add axes for  SVG - 5
          svg5.append("g")
          .attr("class", "x axis")
          .attr("ticks",20)
          .attr("transform", "translate(0," + (h - padding) + ")")
          .call(d3.axisBottom(xScale));

          svg5.append("g")
          .attr("class", "y axis")
          .attr("ticks",12)
          .attr("transform", "translate(" + padding*2 + ",0)")
          .call(d3.axisLeft(yScaleLog));

          //Add axis titles
          svg5.append("text")
          .attr("x", (padding/2))
          .attr("y", h/2 + (padding/2))
          .attr("text-anchor", "middle")
          .attr("transform","rotate(-90 30 260)")
          .style("font-size", "14px")
          .text("Budget");

          svg5.append("text")
          .attr("x", w/2 + (padding/2))
          .attr("y", h - (padding/2.5))
          .attr("text-anchor", "middle")
          .style("font-size", "14px")
          .text("Ratings");

          //Add gridlines for SVG - 5
          var gridlineslog = d3.axisLeft()
                        .tickFormat("")
                        .tickSize(-w)
                        .scale(yScaleLog);

          svg5.append("g")
         .attr("class", "grid")
         .attr("transform", "translate(" + padding*2 + ",0)")
         .call(gridlineslog);

         svg5.append("g")
        .attr("class", "grid")
        .attr("transform", "translate("+padding+ "," + (h - padding) + ")")
        .call(gridlinesb);

          //Add values for SVG - 5
          svg5.selectAll(".symbol")
          .data(dataset)
          .enter().append("path")
          .attr("class", "symbol")
          .attr("d", function(d, i) { return symbol.type(shapeScale(d.IsGoodRating))(); })
          .style("stroke", function(d) { return colourScale(d.IsGoodRating); })
          .attr("transform", function(d) {
          return "translate(" + xScale(d.Rating) + "," + yScaleLog(d.WinsNoms) +")";
        })
          .attr("fill","none");

          // Add header for SVG - 5
          svg5.append("text")
            .attr("x", (w / 2))
            .attr("y", 0 + (padding/ 2))
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .style("text-decoration", "underline")
            .text("Wins/Nominations vs Ratings Graph - Logarithmic Scale");

          // Add legend for SVG - 5
          var legend = svg5.selectAll(".legend")
                    .data(colourScale.domain())
                    .enter().append("g")
                    .attr("class", "legend");

          svg5.append("rect")
          .attr("x",110)
          .attr("y",70)
          .attr("width",130)
          .attr("height",80)
          .attr("stroke","black")
          .attr("fill","none");

          var classes=[0,1];

          legend.selectAll(".symbol")
          .data(classes)
          .enter().append("path")
          .attr("d", function(d) { return symbol.type(shapeScale(d))(); })
          .style("stroke", function(d) { return colourScale(d); })
          .attr("transform", function(d,i) {
          return "translate(" + 220 + "," + ((i * 30)+ 96) +")";
        })
          .attr("fill","none");

          legend.append("text")
          .attr("x", 200)
          .attr("y", 100)
          .attr("transform", function(d, i){return "translate(0," + i * 30 + ")";})
          .attr("font-size", "15px")
          .style("text-anchor", "end")
          .text(function(d) {
              if(d=="1")
                  return "Good Rating";
              else return "Bad Rating";
          });

    });

     </script>
   </body>
